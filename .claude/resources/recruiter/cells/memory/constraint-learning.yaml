# Constraint Learning Memory Cell
# Tracks how constraint application improves through experience and feedback
# Based on cellular constraint architecture from Zettelkasten insights

metadata:
  type: cellular-memory
  purpose: Learn optimal constraint application strategies
  last_updated: 2025-08-15
  version: 1.0.0

constraint_learning_patterns:
  description: |
    Tracks how constraint application strategies improve through experience.
    Learns which constraint combinations work best for different agent types.
  
  atomic_constraint_effectiveness:
    tool_selection:
      success_indicators:
        - "Agent completes tasks without tool errors"
        - "No requests for additional tools"
        - "Efficient resource utilization"
      failure_indicators:
        - "Tool permission errors"
        - "Requests for missing functionality"
        - "Overly complex tool combinations"
      learning_insights:
        - "Validators need only Read, Grep"
        - "Creators benefit from Write, Edit, MultiEdit"
        - "Researchers require WebSearch, WebFetch"
    
    delegation_triggers:
      success_indicators:
        - "Accurate agent selection for tasks"
        - "Proper trigger word recognition"
        - "Context-appropriate delegation"
      failure_indicators:
        - "Wrong agent selected"
        - "Delegation when not needed"
        - "Missing delegation opportunities"
      learning_insights:
        - "IMPORTANT keyword improves trigger precision"
        - "Context description reduces false positives"
        - "Capability matching prevents delegation errors"

molecular_constraint_combinations:
  description: |
    Learn which molecular protocol combinations produce best results
  
  successful_combinations:
    - protocol_set: ["agent_discovery", "pattern_extraction", "constraint_validation"]
      use_case: "Creating new agents with precedent"
      success_rate: 0.92
      key_factors:
        - "Discovery prevents duplication"
        - "Pattern extraction provides templates"
        - "Validation ensures quality"
    
    - protocol_set: ["recursive_improvement", "constraint_orchestration"]
      use_case: "Enhancing existing agents"
      success_rate: 0.88
      key_factors:
        - "Improvement targets specific weaknesses"
        - "Orchestration maintains architecture integrity"
    
    - protocol_set: ["constraint_negotiation", "pattern_extraction"]
      use_case: "Resolving constraint conflicts"
      success_rate: 0.85
      key_factors:
        - "Negotiation finds optimal balance"
        - "Pattern extraction provides alternatives"

cellular_constraint_insights:
  description: |
    Higher-level learning about constraint architecture effectiveness
  
  architecture_patterns:
    well_balanced_agents:
      characteristics:
        - "Constraint score: 7.5-8.5"
        - "Clear atomic constraints"
        - "Coherent molecular protocols"
        - "Persistent cellular memory"
      examples:
        - "Ana: Analysis specialist with focused constraints"
        - "Archie: Architecture specialist with decision protocols"
        - "Tina: Teaching specialist with methodology protocols"
    
    improvement_opportunities:
      under_constrained:
        symptoms:
          - "Unpredictable behavior"
          - "Scope creep"
          - "Unclear boundaries"
        remedies:
          - "Add specific behavioral constraints"
          - "Define clear success criteria"
          - "Establish operational boundaries"
      
      over_constrained:
        symptoms:
          - "Rigid operation"
          - "Unable to adapt"
          - "User frustration"
        remedies:
          - "Relax non-essential constraints"
          - "Allow contextual adaptation"
          - "Enable user preference accommodation"

learning_feedback_loops:
  description: |
    Mechanisms for continuous constraint learning improvement
  
  immediate_feedback:
    sources:
      - "Agent creation success/failure"
      - "User rework requests"
      - "Constraint analyzer scores"
      - "Delegation effectiveness"
    processing:
      - "Update constraint effectiveness ratings"
      - "Adjust combination recommendations"
      - "Refine pattern templates"
  
  delayed_feedback:
    sources:
      - "Long-term agent usage patterns"
      - "User satisfaction over time"
      - "Agent maintenance requirements"
      - "Evolution and adaptation success"
    processing:
      - "Update strategic constraint guidelines"
      - "Revise architecture principles"
      - "Enhance learning algorithms"

constraint_adaptation_strategies:
  description: |
    Strategies for adapting constraints based on learning
  
  context_specific_adaptation:
    - context: "First-time agent creation"
      strategy: "Use conservative, well-proven constraints"
      reasoning: "Minimize risk, ensure basic functionality"
    
    - context: "Experienced user with specific needs"
      strategy: "Allow more flexible, customized constraints"
      reasoning: "User can handle complexity, wants optimization"
    
    - context: "High-stakes or production environment"
      strategy: "Use extensively validated constraint patterns"
      reasoning: "Reliability and predictability paramount"
  
  progressive_constraint_application:
    phase_1: "Basic functional constraints"
    phase_2: "Behavioral and interaction constraints"
    phase_3: "Optimization and efficiency constraints"
    phase_4: "Advanced adaptation and learning constraints"

learning_metrics:
  description: |
    Metrics to measure constraint learning effectiveness
  
  quantitative_metrics:
    - metric: "constraint_accuracy"
      description: "Percentage of agents created with optimal constraint balance"
      current_value: 0.78
      target_value: 0.90
    
    - metric: "first_attempt_success"
      description: "Percentage of agents that work correctly on first try"
      current_value: 0.72
      target_value: 0.85
    
    - metric: "constraint_conflict_rate"
      description: "Frequency of constraint conflicts requiring resolution"
      current_value: 0.15
      target_value: 0.05
  
  qualitative_indicators:
    - "User satisfaction with agent behavior"
    - "Consistency of agent operation across contexts"
    - "Ease of agent maintenance and updates"
    - "Agent adaptability to changing requirements"

knowledge_integration:
  description: |
    How constraint learning integrates with broader system knowledge
  
  with_pattern_evolution:
    - "Successful constraint applications become pattern templates"
    - "Failed constraints inform pattern mutation strategies"
    - "Learning insights guide pattern repository organization"
  
  with_agent_genealogy:
    - "Track constraint inheritance across agent families"
    - "Identify successful constraint lineages"
    - "Learn from constraint evolution paths"
  
  with_effectiveness_tracking:
    - "Constraint learning informed by agent performance data"
    - "Effectiveness metrics guide constraint optimization"
    - "Long-term tracking validates constraint learning outcomes"

constraint_learning_rules:
  description: |
    Rules governing how constraint learning operates
  
  rules:
    - rule: "Learn from both success and failure"
      description: "Failed constraints provide valuable negative examples"
      
    - rule: "Context matters"
      description: "Same constraints may work differently in different contexts"
      
    - rule: "Gradual adaptation"
      description: "Make incremental constraint adjustments based on evidence"
      
    - rule: "Preserve proven patterns"
      description: "Don't modify constraints that consistently work well"
      
    - rule: "Validate before applying"
      description: "Test new constraint insights before widespread adoption"

integration_points:
  with_rita:
    - "Constraint recommendation during agent creation"
    - "Automatic constraint optimization suggestions"
    - "Context-aware constraint adaptation"
    - "Learning feedback from agent creation outcomes"
  
  with_constraint_validation:
    - "Provide learned best practices for validation"
    - "Inform constraint balance assessment"
    - "Guide constraint conflict resolution"
  
  with_recursive_improvement:
    - "Suggest constraint improvements based on learning"
    - "Provide optimization strategies"
    - "Guide systematic enhancement approaches"