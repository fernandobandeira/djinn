---
agent_context: architect
confidence: 0.95
harvested_at: '2025-08-19T22:09:08.677988'
profile: code_examples
source: https://posthog.com/docs/libraries/go
topic: PostHog Go Integration and Backend Monitoring
---

# PostHog Go Integration and Backend Monitoring

[](https://posthog.com/)
  * [Why PostHog?](https://posthog.com/why)
  * [Products](https://posthog.com/products)
  * [Pricing](https://posthog.com/pricing)
  * [Docs](https://posthog.com/docs)
  * [Community](https://posthog.com/community)
  * [Company](https://posthog.com/about)


[Get started](https://us.posthog.com/signup)
  * [Product OS](https://posthog.com/docs/product-os)
  * [Product analytics](https://posthog.com/docs/product-analytics)
  * [Web analytics](https://posthog.com/docs/web-analytics)
  * [Session replay](https://posthog.com/docs/session-replay)
  * [Feature flags](https://posthog.com/docs/feature-flags)
  * [Experiments](https://posthog.com/docs/experiments)
  * [Error tracking](https://posthog.com/docs/error-tracking)
  * [Surveys](https://posthog.com/docs/surveys)
  * [Data pipelines](https://posthog.com/docs/cdp)
  * [Data warehouse](https://posthog.com/docs/data-warehouse)
  * [LLM observability](https://posthog.com/docs/ai-engineering)
  * [Max AI](https://posthog.com/docs/max-ai)


Go
  * Docs


  * [Overview](https://posthog.com/docs)


  * Integration


  * [Install and configure](https://posthog.com/docs/getting-started/install)
    * [Install PostHog](https://posthog.com/docs/getting-started/install?tab=snippet)
    * [Send events](https://posthog.com/docs/getting-started/send-events)
    * [Identify users](https://posthog.com/docs/getting-started/identify-users)
    * [Deploy a proxy](https://posthog.com/docs/advanced/proxy)
    * [Next steps](https://posthog.com/docs/getting-started/next-steps)


  * [SDKs](https://posthog.com/docs/libraries)
    * [SDK comparison](https://posthog.com/docs/libraries)
    * [JavaScript Web Popular](https://posthog.com/docs/libraries/js)
      * [Setup](https://posthog.com/docs/libraries/js)
      * [Features](https://posthog.com/docs/libraries/js/features)
      * [Configuration](https://posthog.com/docs/libraries/js/config)
      * [Persistence](https://posthog.com/docs/libraries/js/persistence)
      * [Reference](https://posthog.com/docs/references/posthog-js)
    * [Android Popular](https://posthog.com/docs/libraries/android)
    * [Capacitor 3rd party](https://posthog.com/docs/libraries/capacitor)
    * [Elixir](https://posthog.com/docs/libraries/elixir)
    * [Flutter](https://posthog.com/docs/libraries/flutter)
    * [Go](https://posthog.com/docs/libraries/go)
    * [iOS Popular](https://posthog.com/docs/libraries/ios)
    * [Java Beta](https://posthog.com/docs/libraries/java)
    * [Node.js](https://posthog.com/docs/libraries/node)
    * [PHP](https://posthog.com/docs/libraries/php)
    * [Python](https://posthog.com/docs/libraries/python)
      * [Setup and features](https://posthog.com/docs/libraries/python)
      * [Reference](https://posthog.com/docs/references/posthog-python)
    * [React Popular](https://posthog.com/docs/libraries/react)
    * [React Native Popular](https://posthog.com/docs/libraries/react-native)
    * [Ruby](https://posthog.com/docs/libraries/ruby)
    * [Rust](https://posthog.com/docs/libraries/rust)
    * [C#/.NET](https://posthog.com/docs/libraries/dotnet)


  * [Frameworks](https://posthog.com/docs/frameworks)
    * [Overview](https://posthog.com/docs/frameworks)
    * [Angular](https://posthog.com/docs/libraries/angular)
    * [Astro](https://posthog.com/docs/libraries/astro)
    * [Bubble](https://posthog.com/docs/libraries/bubble)
    * [Cloudflare Workers](https://posthog.com/docs/libraries/cloudflare-workers)
    * [Django](https://posthog.com/docs/libraries/django)
    * [Docusaurus](https://posthog.com/docs/libraries/docusaurus)
    * [Flask](https://posthog.com/docs/libraries/flask)
    * [Framer](https://posthog.com/docs/libraries/framer)
    * [Gatsby](https://posthog.com/docs/libraries/gatsby)
    * [Google Tag Manager](https://posthog.com/docs/libraries/google-tag-manager)
    * [Hono](https://posthog.com/docs/libraries/hono)
    * [Laravel](https://posthog.com/docs/libraries/laravel)
    * [Next.js](https://posthog.com/docs/libraries/next-js)
    * [Nuxt.js](https://posthog.com/docs/libraries/nuxt-js)
    * [n8n](https://posthog.com/docs/libraries/n8n)
    * [Phoenix](https://posthog.com/docs/libraries/phoenix)
    * [Remix](https://posthog.com/docs/libraries/remix)
    * [Retool](https://posthog.com/docs/libraries/retool)
    * [RudderStack](https://posthog.com/docs/libraries/rudderstack)
    * [Segment](https://posthog.com/docs/libraries/segment)
    * [Shopify](https://posthog.com/docs/libraries/shopify)
    * [Svelte](https://posthog.com/docs/libraries/svelte)
    * [Vue.js](https://posthog.com/docs/libraries/vue-js)
    * [Vercel](https://posthog.com/docs/libraries/vercel)
    * [Webflow](https://posthog.com/docs/libraries/webflow)
    * [WooCommerce](https://posthog.com/docs/libraries/woocommerce)
    * [WordPress](https://posthog.com/docs/libraries/wordpress)


  * [API](https://posthog.com/docs/api)
    * [Overview](https://posthog.com/docs/api)
    * Popular
    * [Capture](https://posthog.com/docs/api/capture)
    * [Flags](https://posthog.com/docs/api/flags)
    * [Queries](https://posthog.com/docs/api/queries)
    * More endpoints
    * [Actions](https://posthog.com/docs/api/actions)
    * [Activity log](https://posthog.com/docs/api/activity-log)
    * [Annotations](https://posthog.com/docs/api/annotations)
    * [Batch exports](https://posthog.com/docs/api/batch-exports)
    * [Cohorts](https://posthog.com/docs/api/cohorts)
    * [Dashboards](https://posthog.com/docs/api/dashboards)
    * [Dashboard templates](https://posthog.com/docs/api/dashboard-templates)
    * [Early access features](https://posthog.com/docs/api/early-access-feature)
    * [Environments](https://posthog.com/docs/api/environments)
    * [Event definitions](https://posthog.com/docs/api/event-definitions)
    * [Events](https://posthog.com/docs/api/events)
    * [Experiments](https://posthog.com/docs/api/experiments)
    * [Feature flags](https://posthog.com/docs/api/feature-flags)
    * [Groups](https://posthog.com/docs/api/groups)
    * [Groups types](https://posthog.com/docs/api/groups-types)
    * [Hog functions](https://posthog.com/docs/api/hog-functions)
    * [Insights](https://posthog.com/docs/api/insights)
    * [Invites](https://posthog.com/docs/api/invites)
    * [Members](https://posthog.com/docs/api/members)
    * [Notebooks](https://posthog.com/docs/api/notebooks)
    * [Organizations](https://posthog.com/docs/api/organizations)
    * [Persons](https://posthog.com/docs/api/persons)
    * [Projects](https://posthog.com/docs/api/projects)
    * [Property definitions](https://posthog.com/docs/api/property-definitions)
    * [Query](https://posthog.com/docs/api/query)
    * [Roles](https://posthog.com/docs/api/roles)
    * [Session recordings](https://posthog.com/docs/api/session-recordings)
    * [Session recording playlists](https://posthog.com/docs/api/session-recording-playlists)
    * [Sessions](https://posthog.com/docs/api/sessions)
    * [Subscriptions](https://posthog.com/docs/api/subscriptions)
    * [Surveys](https://posthog.com/docs/api/surveys)
    * [Users](https://posthog.com/docs/api/user)
    * [Web Analytics](https://posthog.com/docs/api/web-analytics)
    * [Data model](https://posthog.com/docs/data-model)


  * [Advanced](https://posthog.com/docs/advanced/cdp)
    * [Using a Customer Data Platform](https://posthog.com/docs/advanced/cdp)
    * [Using Content Security Policies](https://posthog.com/docs/advanced/content-security-policy)
    * [Browser extensions](https://posthog.com/docs/advanced/browser-extension)
    * [Enabling beta features](https://posthog.com/docs/getting-started/enable-betas)
    * [Data import and export](https://posthog.com/docs/getting-started/data-import-export)
    * [Ingestion warnings](https://posthog.com/docs/data/ingestion-warnings)


  * Winning with PostHog


  * [Getting HogPilled](https://posthog.com/docs/new-to-posthog/getting-hogpilled)


  * [Measuring activation](https://posthog.com/docs/new-to-posthog/activation)


  * [Tracking retention](https://posthog.com/docs/new-to-posthog/retention)


  * [Capturing revenue](https://posthog.com/docs/new-to-posthog/revenue)


  * [Switching to PostHog](https://posthog.com/docs/new-to-posthog/switch-guide/switching-to-posthog)
    * [Convincing teammates](https://posthog.com/docs/new-to-posthog/switch-guide/switching-to-posthog)
    * [Planning your pilot](https://posthog.com/docs/new-to-posthog/switch-guide/planning-your-pilot)
    * [What to expect when migrating](https://posthog.com/docs/new-to-posthog/switch-guide/migration-planning)


  * PostHog explained


  * [What is Product OS?](https://posthog.com/docs/product-os)


  * [Data types](https://posthog.com/docs/new-to-posthog/understand-posthog)
    * [Your data in PostHog](https://posthog.com/docs/new-to-posthog/understand-posthog)
    * [Events](https://posthog.com/docs/data/events)
    * [Anonymous vs identified events](https://posthog.com/docs/data/anonymous-vs-identified-events)
    * [Actions](https://posthog.com/docs/data/actions)
    * [People](https://posthog.com/docs/data/persons)
    * [Cohorts](https://posthog.com/docs/data/cohorts)
    * [Sessions](https://posthog.com/docs/data/sessions)
    * [Data management](https://posthog.com/docs/data)
    * [Properties](https://posthog.com/docs/data/event-spec/ecommerce-events)
      * [Ecommerce events spec](https://posthog.com/docs/data/event-spec/ecommerce-events)
      * [Channel type](https://posthog.com/docs/data/channel-type)
      * [Timestamps](https://posthog.com/docs/data/timestamps)
      * [UTM segmentation](https://posthog.com/docs/data/utm-segmentation)
    * [Annotations](https://posthog.com/docs/data/annotations)
    * [Replay comments](https://posthog.com/docs/data/comments)


  * [Tools and features](https://posthog.com/docs/max-ai)
    * [Max AI](https://posthog.com/docs/max-ai)
    * [Toolbar](https://posthog.com/docs/toolbar)
    * [Heatmaps](https://posthog.com/docs/toolbar/heatmaps)
    * [Notebooks](https://posthog.com/docs/notebooks)
    * [Activity](https://posthog.com/docs/activity)
    * [Organizations](https://posthog.com/docs/settings/organizations)
    * [Projects](https://posthog.com/docs/settings/projects)
    * [Model context protocol (MCP)](https://posthog.com/docs/model-context-protocol)
    * [Hog](https://posthog.com/docs/hog)
    * [SQL access](https://posthog.com/docs/sql)
      * [Overview](https://posthog.com/docs/sql)
      * [SQL expressions](https://posthog.com/docs/sql/expressions)
      * [Supported functions](https://posthog.com/docs/sql/clickhouse-functions)
      * [Supported aggregations](https://posthog.com/docs/sql/aggregations)
      * [Tutorials](https://posthog.com/docs/sql/tutorials)
    * [Access control](https://posthog.com/docs/settings/access-control)
    * [SSO & SAML](https://posthog.com/docs/settings/sso)
    * [Command palette](https://posthog.com/docs/cmd-k)
    * [Account settings](https://posthog.com/docs/settings/account-settings)
    * [Site Apps](https://posthog.com/docs/site-apps)
      * [Overview](https://posthog.com/docs/site-apps)
      * [Notification Bar](https://posthog.com/docs/site-apps/notification-bar)
      * [Pineapple Mode](https://posthog.com/docs/site-apps/pineapple-mode)


  * Resources


  * [Self-host](https://posthog.com/docs/self-host)
    * [Overview](https://posthog.com/docs/self-host)
    * [Configure](https://posthog.com/docs/self-host/configure/instance-settings)
      * [Instance settings](https://posthog.com/docs/self-host/configure/instance-settings)
      * [Environment variables](https://posthog.com/docs/self-host/configure/environment-variables)
      * [Securing PostHog](https://posthog.com/docs/self-host/configure/securing-posthog)
      * [Running behind a proxy](https://posthog.com/docs/self-host/configure/running-behind-proxy)
      * [Configuring email](https://posthog.com/docs/self-host/configure/email)
      * [Configuring Slack](https://posthog.com/docs/self-host/configure/slack)
      * [Data egress](https://posthog.com/docs/self-host/configure/data-egress)
    * [Troubleshooting and FAQs](https://posthog.com/docs/self-host/deploy/troubleshooting)
    * [Support](https://posthog.com/docs/self-host/open-source/support)
    * [Disclaimer](https://posthog.com/docs/self-host/open-source/disclaimer)


  * [Migrate](https://posthog.com/docs/migrate)
    * [Overview](https://posthog.com/docs/migrate)
    * [Managed migrations](https://posthog.com/docs/migrate/managed-migrations)
    * [Migrate to PostHog Cloud](https://posthog.com/docs/migrate/migrate-to-cloud)
    * [Migrate from Amplitude](https://posthog.com/docs/migrate/migrate-from-amplitude)
    * [Migrate from Google Analytics](https://posthog.com/docs/migrate/google-analytics)
    * [Migrate from Heap](https://posthog.com/docs/migrate/heap)
    * [Migrate from LaunchDarkly](https://posthog.com/docs/migrate/launchdarkly)
    * [Migrate from Matomo](https://posthog.com/docs/migrate/matomo)
    * [Migrate from Mixpanel](https://posthog.com/docs/migrate/mixpanel)
    * [Migrate from Pendo](https://posthog.com/docs/migrate/pendo)
    * [Migrate from Plausible](https://posthog.com/docs/migrate/plausible)
    * [Migrate from Statsig](https://posthog.com/docs/migrate/statsig)


  * [Reverse proxy](https://posthog.com/docs/advanced/proxy/managed-reverse-proxy)
    * [Managed reverse proxy](https://posthog.com/docs/advanced/proxy/managed-reverse-proxy)
    * [AWS CloudFront](https://posthog.com/docs/advanced/proxy/cloudfront)
    * [Caddy](https://posthog.com/docs/advanced/proxy/caddy)
    * [Cloudflare](https://posthog.com/docs/advanced/proxy/cloudflare)
    * [Kubernetes](https://posthog.com/docs/advanced/proxy/kubernetes-ingress-controller)
    * [Netlify](https://posthog.com/docs/advanced/proxy/netlify)
    * [Next.js](https://posthog.com/docs/advanced/proxy/nextjs)
    * [Next.js middleware](https://posthog.com/docs/advanced/proxy/nextjs-middleware)
    * [nginx](https://posthog.com/docs/advanced/proxy/nginx)
    * [Node](https://posthog.com/docs/advanced/proxy/node)
    * [Nuxt](https://posthog.com/docs/advanced/proxy/nuxt)
    * [Pomerium](https://posthog.com/docs/advanced/proxy/pomerium)
    * [Remix](https://posthog.com/docs/advanced/proxy/remix)
    * [SvelteKit](https://posthog.com/docs/advanced/proxy/sveltekit)
    * [Vercel](https://posthog.com/docs/advanced/proxy/vercel)


  * [Billing](https://posthog.com/docs/billing/limits-alerts)
    * [Billing limits and alerts](https://posthog.com/docs/billing/limits-alerts)
    * [Estimating usage and costs](https://posthog.com/docs/billing/estimating-usage-costs)
    * [Annual plans](https://posthog.com/docs/billing/annual-plans)
    * [Spike detection](https://posthog.com/docs/billing/spike-detection)
    * [Common questions about billing](https://posthog.com/docs/billing/common-questions)


  * [Privacy](https://posthog.com/docs/privacy)
    * [Overview](https://posthog.com/docs/privacy)
    * [Data collection](https://posthog.com/docs/privacy/data-collection)
    * [Data storage](https://posthog.com/docs/privacy/data-storage)
    * [GDPR compliance](https://posthog.com/docs/privacy/gdpr-compliance)
    * [HIPAA guidance](https://posthog.com/docs/privacy/hipaa-compliance)
    * [CCPA guidance](https://posthog.com/docs/privacy/ccpa-compliance)
    * [SOC 2](https://posthog.com/docs/privacy/soc2)
    * [Ad blockers](https://posthog.com/docs/privacy/ad-blockers)


  * [Contribute](https://posthog.com/docs/contribute)
    * [Overview](https://posthog.com/docs/contribute)
    * [Code of conduct](https://posthog.com/docs/contribute/code-of-conduct)
    * [Recognizing contributions](https://posthog.com/docs/contribute/recognizing-contributions)
    * [Badge](https://posthog.com/docs/contribute/badge)


  * [How PostHog works](https://posthog.com/docs/how-posthog-works)
    * [Overview](https://posthog.com/docs/how-posthog-works)
    * [Data model: fields](https://posthog.com/docs/how-posthog-works/data-model)
    * [Ingestion pipeline](https://posthog.com/docs/how-posthog-works/ingestion-pipeline)
    * [ClickHouse](https://posthog.com/docs/how-posthog-works/clickhouse)
    * [Querying data](https://posthog.com/docs/how-posthog-works/queries)
    * [Session replay](https://posthog.com/docs/how-posthog-works/recordings-ingestion)


  * [Support options](https://posthog.com/docs/support-options)


  * [Glossary](https://posthog.com/docs/glossary)


# Go
Last updated: Aug 11, 2025
|[Edit this page](https://github.com/PostHog/posthog.com/tree/master/contents/docs/libraries/go/index.mdx)|
Copy page
[](https://github.com/PostHog/posthog-go)
On this page
  * Installation
  * Capturing events
  * Person profiles and properties
  * Alias
  * Feature flags
  * Local Evaluation
  * Experiments (A/B tests)
  * Group analytics
  * Thank you


##### Which features are available in this library?
  * ![Available](https://posthog.com/docs/libraries/go)Event capture[](https://posthog.com/tutorials/event-tracking-guide)
  * ![Available](https://posthog.com/docs/libraries/go)User identification[](https://posthog.com/docs/product-analytics/identify)
  * ![Available](https://posthog.com/docs/libraries/go)Feature flags[](https://posthog.com/docs/feature-flags)
  * ![Available](https://posthog.com/docs/libraries/go)Group analytics[](https://posthog.com/docs/product-analytics/group-analytics)
  * ![Not available](https://posthog.com/docs/libraries/go)Surveys[](https://posthog.com/docs/surveys)
  * ![Not available](https://posthog.com/docs/libraries/go)LLM observability[](https://posthog.com/docs/ai-engineering/observability)


This library uses an internal queue to make calls fast and non-blocking. It also batches requests and flushes asynchronously, making it perfect to use in any part of your web app or other server-side application that needs performance.
## Installation
Terminal
```

go get github.com/posthog/posthog-go

```

Go
```

package main
import(
"os"
"github.com/posthog/posthog-go"
)
funcmain(){
  client,_:= posthog.NewWithConfig(
    os.Getenv("POSTHOG_API_KEY"),
    posthog.Config{
      PersonalApiKey:"your personal API key",// Optional, but much more performant. If this token is not supplied, then fetching feature flag values will be slower.
      Endpoint:"https://us.i.posthog.com",
},
)
defer client.Close()
// run commands
}

```

## Capturing events
You can send custom events using `capture`:
Go
```

client.Enqueue(posthog.Capture{
 DistinctId:"distinct_id_of_the_user",
 Event:"user_signed_up",
})

```

> **Tip:** We recommend using a `[object] [verb]` format for your event names, where `[object]` is the entity that the behavior relates to, and `[verb]` is the behavior itself. For example, `project created`, `user signed up`, or `invite sent`.
### Setting event properties
Optionally, you can include additional information with the event by including a [properties](https://posthog.com/docs/data/events#event-properties) object:
Go
```

client.Enqueue(posthog.Capture{
  DistinctId:"distinct_id_of_the_user",
  Event:"user_signed_up",
  Properties: posthog.NewProperties().
Set("login_type","email").
Set("is_free_trial",true),
})

```

### Capturing pageviews
If you're aiming for a backend-only implementation of PostHog and won't be capturing events from your frontend, you can send `pageviews` from your backend like so:
Go
```

client.Enqueue(posthog.Capture{
 DistinctId:"distinct_id_of_the_user",
 Event:"$pageview",
 Properties: posthog.NewProperties().
Set("$current_url","https://example.com"),
})

```

## Person profiles and properties
For backward compatibility, the Go SDK captures identified events by default. These create [person profiles](https://posthog.com/docs/data/persons). To set [person properties](https://posthog.com/docs/data/user-properties) in these profiles, include them when capturing an event:
Go
```

client.Enqueue(posthog.Capture{
  DistinctId:"distinct_id",
  Event:"event_name",
  Properties:map[string]interface{}{
"$set":map[string]interface{}{
"name":"Max Hedgehog",
},
"$set_once":map[string]interface{}{
"initial_url":"/blog",
},
},
})

```

For more details on the difference between `$set` and `$set_once`, see our [person properties docs](https://posthog.com/docs/data/user-properties#what-is-the-difference-between-set-and-set_once).
To capture [anonymous events](https://posthog.com/docs/data/anonymous-vs-identified-events) without person profiles, set the event's `$process_person_profile` property to `false`:
Go
```

client.Enqueue(posthog.Capture{
  DistinctId:"distinct_id",
  Event:"event_name",
  Properties:map[string]interface{}{
"$process_person_profile":false,
},
})

```

## Alias
Sometimes, you want to assign multiple distinct IDs to a single user. This is helpful when your primary distinct ID is inaccessible. For example, if a distinct ID used on the frontend is not available in your backend. 
In this case, you can use `alias` to assign another distinct ID to the same user.
Go
```

client.Enqueue(posthog.Alias{
 DistinctId:"distinct_id",
 Alias:"alias_id",
})

```

We strongly recommend reading our docs on [alias](https://posthog.com/docs/data/identify#alias-assigning-multiple-distinct-ids-to-the-same-user) to best understand how to correctly use this method.
## Feature flags
PostHog's [feature flags](https://posthog.com/docs/feature-flags) enable you to safely deploy and roll back new features as well as target specific users and groups with them.
There are 2 steps to implement feature flags in Go:
### Step 1: Evaluate the feature flag value
#### Boolean feature flags
Go
```

isMyFlagEnabled, err := client.IsFeatureEnabled(posthog.FeatureFlagPayload{
  Key:"flag-key",
  DistinctId:"distinct_id_of_your_user",
})
if err !=nil{
// Handle error (e.g. capture error and fallback to default behaviour)
}
if isMyFlagEnabled ==true{
// Do something differently for this user
}

```

#### Multivariate feature flags
Go
```

enabledVariant, err := client.GetFeatureFlag(posthog.FeatureFlagPayload{
  Key:"flag-key",
  DistinctId:"distinct_id_of_your_user",
})
if err !=nil{
// Handle error (e.g. capture error and fallback to default behaviour)
}
if enabledVariant =="variant-key"{// replace 'variant-key' with the key of your variant
// Do something differently for this user
}

```

### Step 2: Include feature flag information when capturing events
If you want use your feature flag to breakdown or filter events in your [insights](https://posthog.com/docs/product-analytics/insights), you'll need to include feature flag information in those events. This ensures that the feature flag value is attributed correctly to the event.
> **Note:** This step is only required for events captured using our server-side SDKs or [API](https://posthog.com/docs/api).
There are two methods you can use to include feature flag information in your events:
#### Method 1: Include the `$feature/feature_flag_name` property
In the event properties, include `$feature/feature_flag_name: variant_key`:
Go
```

client.Enqueue(posthog.Capture{
 DistinctId:"distinct_id_of_your_user",
 Event:"event_name",
 Properties: posthog.NewProperties().
Set("$feature/feature-flag-key","variant-key"),// replace feature-flag-key with your flag key. Replace 'variant-key' with the key of your variant
})

```

#### Method 2: Set `SendFeatureFlags` to `true`
The `Capture` struct has an optional field `SendFeatureFlags`, which is set to `false` by default. This parameter controls whether feature flag information is sent with the event.
#### Basic usage
Setting `SendFeatureFlags` to `true` will include feature flag information with the event:
Go
```

client.Enqueue(posthog.Capture{
 DistinctId:"distinct_id_of_your_user",
 Event:"event_name",
 SendFeatureFlags:true,
})

```

## Advanced usage (v1.6.1+)
As of version 1.6.1, `SendFeatureFlags` can also accept a `SendFeatureFlagsOptions` struct for more granular control:
Go
```

client.Enqueue(posthog.Capture{
 DistinctId:"distinct_id_of_your_user",
 Event:"event_name",
 SendFeatureFlags: posthog.SendFeatureFlagsOptions{
  OnlyEvaluateLocally:true,
  PersonProperties:map[string]interface{}{
"plan":"premium",
},
  GroupProperties:map[string]map[string]interface{}{
"org":{
"tier":"enterprise",
},
},
},
})

```

#### Performance considerations
  * **With local evaluation** : When [local evaluation](https://posthog.com/docs/feature-flags/local-evaluation) is configured, setting `SendFeatureFlags: true` will **not** make additional server requests. Instead, it uses the locally cached feature flags, and it provides an interface for including person and/or group properties needed to evaluate the flags in the context of the event, if required.
  * **Without local evaluation** : PostHog will make an additional request to fetch feature flag information before capturing the event, which adds delay.


#### Breaking change in v1.6.1
Prior to version 1.6.1, feature flags were automatically sent with events when using local evaluation, even when `SendFeatureFlags` was not explicitly set. This behavior has been **removed** in v1.6.1 to be more predictable and explicit.
If you were relying on this automatic behavior, you must now explicitly set `SendFeatureFlags: true` to continue sending feature flags with your events.
### Fetching all flags for a user
You can fetch all flag values for a single user by calling `GetAllFlags()`.
This is useful when you need to fetch multiple flag values and don't want to make multiple requests.
Go
```

featureVariants, err := client.GetAllFlags(posthog.FeatureFlagPayloadNoKey{
    DistinctId:"distinct_id_of_your_user",
})

```

### Sending `$feature_flag_called` events
Capturing `$feature_flag_called` events enable PostHog to know when a flag was accessed by a user and thus provide [analytics and insights](https://posthog.com/docs/product-analytics/insights) on the flag. By default, we send a these event when:
  1. You call `GetFeatureFlag()` or `IsFeatureEnabled()`, AND 
  2. It's a new user, or the value of the flag has changed. 


> _Note:_ Tracking whether it's a new user or if a flag value has changed happens in a local cache. This means that if you reinitialize the PostHog client, the cache resets as well â€“ causing `$feature_flag_called` events to be sent again when calling `GetFeatureFlag` or `IsFeatureEnabled`. PostHog is built to handle this, and so duplicate `$feature_flag_called` events won't affect your analytics.
You can disable automatically capturing `$feature_flag_called` events. For example, when you don't need the analytics, or it's being called at such a high volume that sending events slows things down.
To disable it (pre v1.6.1), set the `SendFeatureFlagEvents` argument in your function call, like so:
Go
```

sendFeatureFlags :=false
isMyFlagEnabled, err := client.IsFeatureEnabled(posthog.FeatureFlagPayload{
  Key:"flag-key",
  DistinctId:"distinct_id_of_your_user",
  SendFeatureFlagEvents:&sendFeatureFlags,
})

```

Versions after v1.6.1 have this feature disabled by default.
### Advanced: Overriding server properties
Sometimes, you may want to evaluate feature flags using [person properties](https://posthog.com/docs/product-analytics/person-properties), [groups](https://posthog.com/docs/product-analytics/group-analytics), or group properties that haven't been ingested yet, or were set incorrectly earlier. 
You can provide properties to evaluate the flag with by using the `person properties`, `groups`, and `group properties` arguments. PostHog will then use these values to evaluate the flag, instead of any properties currently stored on your PostHog server.
For example: 
Go
```

enabledVariant, err := client.GetFeatureFlag(
  FeatureFlagPayload{
    Key:"flag-key",
    DistinctId:"distinct_id_of_the_user",
    Groups: posthog.NewGroups().
Set("your_group_type","your_group_id").
Set("another_group_type","your_group_id"),
    PersonProperties: posthog.NewProperties().
Set("property_name","value"),
    GroupProperties:map[string]map[string]interface{}{
"your_group_type":{
"group_property_name":"value",
},
"another_group_type":{
"group_property_name":"value",
},
},
},
)

```

### Overriding GeoIP properties
By default, a user's GeoIP properties are set using the IP address they use to capture events on the frontend. You may want to override the these properties when evaluating feature flags. A common reason to do this is when you're not using PostHog on your frontend, so the user has no GeoIP properties. 
Currently PostHog does **not** provide a way to override GeoIP properties using our SDKs. Our API, however, does allow you do this. See our API docs on [how to override GeoIP properties](https://posthog.com/docs/api/flags#overriding-geoip-properties) for more details. 
### Request timeout
You can configure the `FeatureFlagRequestTimeout` parameter when initializing your PostHog client to set a flag request timeout. This helps prevent your code from being blocked in the case when PostHog's servers are too slow to respond. By default, this is set at 3 seconds.
Go
```

client,_:= posthog.NewWithConfig(
  os.Getenv("<ph_project_api_key>"),
  posthog.Config{
   PersonalApiKey:"your personal API key",// Optional, but much more performant. If this token is not supplied, then fetching feature flag values will be slower.
   Endpoint:"https://us.i.posthog.com",
   FeatureFlagRequestTimeout:3// Time in seconds. Default is 3.
},
)

```

### Error handling
When using the PostHog SDK, it's important to handle potential errors that may occur during feature flag operations. Here's an example of how to wrap PostHog SDK methods in an error handler:
Go
```

funchandleFeatureFlag(client *posthog.Client, flagKey string, distinctId string){
  flag, err := client.GetFeatureFlag(posthog.FeatureFlagPayload{
    Key:    flagKey,
    DistinctId: distinctId,
})
if err !=nil{
// Handle the error appropriately
    log.Printf("Error fetching feature flag: %v", err)
return
}
// Use the flag value as needed
  fmt.Printf("Feature flag '%s' for user '%s': %s\n", flagKey, distinctId, flag)
}

```

### Local Evaluation
Evaluating feature flags requires making a request to PostHog for each flag. However, you can improve performance by evaluating flags locally. Instead of making a request for each flag, PostHog will periodically request and store feature flag definitions locally, enabling you to evaluate flags without making additional requests.
It is best practice to use local evaluation flags when possible, since this enables you to resolve flags faster and with fewer API calls.
For details on how to implement local evaluation, see our [local evaluation guide](https://posthog.com/docs/feature-flags/local-evaluation).
## Experiments (A/B tests)
Since [experiments](https://posthog.com/docs/experiments/manual) use feature flags, the code for running an experiment is very similar to the feature flags code:
Go
```

variant, err := client.GetFeatureFlag(posthog.FeatureFlagPayload{
  Key:"experimentfeature-flag-name",
  DistinctId:"user_distinct_id",
})
if err !=nil{
// Handle error (e.g. capture error and fallback to default behaviour)
}
if variant =="variant-name"{
// Do something
}

```

It's also possible to [run experiments without using feature flags](https://posthog.com/docs/experiments/running-experiments-without-feature-flags).
## Group analytics
Group analytics allows you to associate an event with a group (e.g. teams, organizations, etc.). Read the [Group Analytics](https://posthog.com/docs/user-guides/group-analytics) guide for more information.
> **Note:** This is a paid feature and is not available on the open-source or free cloud plan. Learn more [here](https://posthog.com/pricing).
  * Send an event associated with a group


Go
```

client.Enqueue(posthog.Capture{
  DistinctId:"user_distinct_id",
  Event:"some_event",
  Groups: posthog.NewGroups().
Set("company","company_id_in_your_db"),
})

```

  * Update properties on a group


Go
```

client.Enqueue(posthog.GroupIdentify{
  Type:"company",
  Key:"company_id_in_your_db",
  Properties: posthog.NewProperties().
Set("name","Awesome Inc.").
Set("employees",11),
})

```

The `name` is a special property which is used in the PostHog UI for the name of the group. If you don't specify a `name` property, the group ID will be used instead.
## Thank you
This library is largely based on the `analytics-go` package.
### Questions? Ask Max AI.
It's easier than reading through **718 pages of documentation**
Chat with Max
### Community questions
Ask a questionLogin
### Was this page useful?
HelpfulCould be better
Next article
### iOS
This library uses an internal queue to make calls fast and non-blocking. It also batches requests and flushes asynchronously, making it perfect to use in any part of your mobile app. PostHog supports the following Apple platforms: iOS: Version 13 or later macOS: Catalina (10.15) or later tvOS: Version 13 or later watchOS: Version 6 or later visionOS: Version 1 or later Installation Capturing events Preventing sensitive data capture To exclude specific UI elements from autocapture orâ€¦
[Read next article](https://posthog.com/docs/libraries/ios)
### Contributors
### [vassiedkContributor![](https://avatars.githubusercontent.com/u/66254686?v=4)](https://github.com/vassiedk)### [Cory SlaterProduct Manager![](https://res.cloudinary.com/dmukukwp6/image/upload/c_scale,w_200/cory_s_compressed_0bafe0a2c4)](https://posthog.com/community/profiles/34160)### [Ian VanagasTechnical Content Marketer![](https://res.cloudinary.com/dmukukwp6/image/upload/c_scale,w_200/ian_31bf16ef7d_c3339bc255)](https://posthog.com/community/profiles/29296)+6 more
#### Jump to:
  * Installation
  * Capturing events
  * Person profiles and properties
  * Alias
  * Feature flags
  * Local Evaluation
  * Experiments (A/B tests)
  * Group analytics
  * Thank you
  * Questions?


[](https://posthog.com/)
  * #### [Products](https://posthog.com/products)
  * [All products](https://posthog.com/products)
  * [Max AI](https://posthog.com/max)
  * [Product analytics](https://posthog.com/product-analytics)
  * [Web analytics](https://posthog.com/web-analytics)
  * [Session replay](https://posthog.com/session-replay)
  * [Feature flags](https://posthog.com/feature-flags)
  * [Error tracking](https://posthog.com/error-tracking)
  * [Experiments](https://posthog.com/experiments)
  * [Surveys](https://posthog.com/surveys)
  * [Product OS](https://posthog.com/product-os)
  * [Data connections](https://posthog.com/cdp)
  * [Customer stories](https://posthog.com/customers)
  * [PostHog vs...](https://posthog.com/blog/tags/comparisons)
  * [For startups](https://posthog.com/startups)
  * [Pricing](https://posthog.com/pricing)
  * [How we do "sales"](https://posthog.com/sales)
  * [Founder stack](https://posthog.com/founder-stack)


  * #### [Product OS](https://posthog.com/docs/product-os)
  * [New? Start here.](https://posthog.com/docs/getting-started/install)
  * [SDKs](https://posthog.com/docs/libraries/js)
  * [Framework guides](https://posthog.com/docs/frameworks)
  * [Data management](https://posthog.com/docs/data)
  * [SQL access](https://posthog.com/docs/sql)
  * [Toolbar](https://posthog.com/docs/toolbar)
  * [API](https://posthog.com/docs/api)


  * #### [Docs](https://posthog.com/docs)
  * [Product analytics](https://posthog.com/docs/product-analytics)
  * [Session replay](https://posthog.com/docs/session-replay)
  * [Feature flags](https://posthog.com/docs/feature-flags)
  * [Error tracking](https://posthog.com/docs/error-tracking)
  * [Experiments](https://posthog.com/docs/experiments)
  * [Surveys](https://posthog.com/docs/surveys)
  * [CDP](https://posthog.com/docs/cdp)
  * [Data warehouse](https://posthog.com/docs/data-warehouse)
  * [Migrate](https://posthog.com/docs/migrate)


  * #### [Community](https://posthog.com/questions)
  * [Questions?](https://posthog.com/questions)
  * [Guides](https://posthog.com/tutorials)
  * [Integrations](https://posthog.com/cdp)
  * [Dashboard templates](https://posthog.com/templates)
  * [Founders](https://posthog.com/founders/all)
  * [Product engineers](https://posthog.com/product-engineers/all)
  * [Tracks](https://posthog.com/tracks)
  * [Merch](https://posthog.com/merch)
  * [Contributors](https://posthog.com/contributors)
  * [Newsletter](https://newsletter.posthog.com)
  * [PostHog FM](https://open.spotify.com/playlist/7A2H2J3WhpJmMEwAhKahWH?si=47418915a8d0447b)
  * [PostHog on GitHub](https://github.com/PostHog/posthog)
  * [Cool tech jobs](https://posthog.com/cool-tech-jobs)


  * #### [Handbook](https://posthog.com/handbook)
  * [Why we're here](https://posthog.com/handbook/why-does-posthog-exist)
  * [Our story](https://posthog.com/handbook/story)
  * [How we work](https://posthog.com/handbook/company/culture)
  * [Values](https://posthog.com/handbook/values)
  * [Tips for working here](https://posthog.com/handbook/help)
  * [Team structure](https://posthog.com/handbook/team-structure)
  * [Engineering](https://posthog.com/handbook/engineering/developing-locally)
  * [Brand](https://posthog.com/handbook/brand/philosophy)
  * [Marketing](https://posthog.com/handbook/growth/marketing)


  * #### [Company](https://posthog.com/about)
  * [About](https://posthog.com/about)
  * [Roadmap](https://posthog.com/roadmap)
  * [Changelog](https://posthog.com/changelog/2025)
  * [People](https://posthog.com/people)
  * [Small teams](https://posthog.com/teams)
  * [Blog](https://posthog.com/blog/all)
  * [Investors](https://posthog.com/handbook/strategy/investors)
  * [Press](https://posthog.com/media)
  * [FAQ](https://posthog.com/faq)
  * [Security](https://posthog.com/handbook/company/security)
  * [Support](https://posthog.com/questions)
  * [Careers](https://posthog.com/careers)


  * [](https://x.com/posthog)
  * [](https://www.linkedin.com/company/posthog)
  * [](https://www.youtube.com/channel/UCn4mJ4kK5KVSvozJre645LA)
  * [](https://github.com/PostHog)


Â© 2025 PostHog, Inc.
  * [System status](https://status.posthog.com)
  * ðŸ‘‰[Generate a DPA](https://posthog.com/dpa)ðŸ‘ˆ(It's guaranteed fun!)
  * [SOC 2](https://posthog.com/docs/privacy/soc2)
  * [HIPAA](https://posthog.com/docs/privacy/hipaa-compliance)
  * [Privacy policy](https://posthog.com/privacy)
  * [Terms](https://posthog.com/terms)


**PostHog.com doesn't use third party cookies** - only a single in-house cookie.
No data is sent to a third party.
AcceptDecline
![Ursula von der Leyen, President of the European Commission](https://res.cloudinary.com/dmukukwp6/image/upload/c_scale,w_250/v1/posthog.com/src/components/EU/images/ursula)
  * [Product OS](https://posthog.com/docs/product-os)
  * [Product analytics](https://posthog.com/docs/product-analytics)
  * [Web analytics](https://posthog.com/docs/web-analytics)
  * [Session replay](https://posthog.com/docs/session-replay)
  * [Feature flags](https://posthog.com/docs/feature-flags)
  * [Experiments](https://posthog.com/docs/experiments)
  * [Error tracking](https://posthog.com/docs/error-tracking)
  * [Surveys](https://posthog.com/docs/surveys)
  * [Data pipelines](https://posthog.com/docs/cdp)
  * [Data warehouse](https://posthog.com/docs/data-warehouse)
  * [LLM observability](https://posthog.com/docs/ai-engineering)
  * [Max AI](https://posthog.com/docs/max-ai)


  * [Why PostHog?](https://posthog.com/why)
  * [Products](https://posthog.com/products)
  * [Pricing](https://posthog.com/pricing)
  * [Docs](https://posthog.com/docs)
  * [Community](https://posthog.com/community)
  * [Company](https://posthog.com/about)




## Source Information
- URL: https://posthog.com/docs/libraries/go
- Harvested: 2025-08-19T22:09:08.677988
- Profile: code_examples
- Agent: architect
