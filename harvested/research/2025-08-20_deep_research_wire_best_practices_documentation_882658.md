---
agent_context: architect
confidence: 0.95
harvested_at: '2025-08-20T00:38:25.891866'
profile: deep_research
source: https://github.com/google/wire/blob/main/docs/best-practices.md
topic: Wire Best Practices Documentation
---

# Wire Best Practices Documentation

[Skip to content](https://github.com/google/wire/blob/main/docs/best-practices.md#start-of-content)
## Navigation Menu
Toggle navigation
[ ](https://github.com/)
[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fgoogle%2Fwire%2Fblob%2Fmain%2Fdocs%2Fbest-practices.md)
Appearance settings
  * Product 
    * [ GitHub Copilot  Write better code with AI  ](https://github.com/features/copilot)
    * [ GitHub Spark  New  Build and deploy intelligent apps  ](https://github.com/features/spark)
    * [ GitHub Models  New  Manage and compare prompts  ](https://github.com/features/models)
    * [ GitHub Advanced Security  Find and fix vulnerabilities  ](https://github.com/security/advanced-security)
    * [ Actions  Automate any workflow  ](https://github.com/features/actions)
    * [ Codespaces  Instant dev environments  ](https://github.com/features/codespaces)
    * [ Issues  Plan and track work  ](https://github.com/features/issues)
    * [ Code Review  Manage code changes  ](https://github.com/features/code-review)
    * [ Discussions  Collaborate outside of code  ](https://github.com/features/discussions)
    * [ Code Search  Find more, search less  ](https://github.com/features/code-search)
Explore
    * [ Why GitHub ](https://github.com/why-github)
    * [ All features ](https://github.com/features)
    * [ Documentation ](https://docs.github.com)
    * [ GitHub Skills ](https://skills.github.com)
    * [ Blog ](https://github.blog)
  * Solutions 
By company size
    * [ Enterprises ](https://github.com/enterprise)
    * [ Small and medium teams ](https://github.com/team)
    * [ Startups ](https://github.com/enterprise/startups)
    * [ Nonprofits ](https://github.com/solutions/industry/nonprofits)
By use case
    * [ DevSecOps ](https://github.com/solutions/use-case/devsecops)
    * [ DevOps ](https://github.com/solutions/use-case/devops)
    * [ CI/CD ](https://github.com/solutions/use-case/ci-cd)
    * [ View all use cases ](https://github.com/solutions/use-case)
By industry
    * [ Healthcare ](https://github.com/solutions/industry/healthcare)
    * [ Financial services ](https://github.com/solutions/industry/financial-services)
    * [ Manufacturing ](https://github.com/solutions/industry/manufacturing)
    * [ Government ](https://github.com/solutions/industry/government)
    * [ View all industries ](https://github.com/solutions/industry)
[ View all solutions ](https://github.com/solutions)
  * Resources 
Topics
    * [ AI ](https://github.com/resources/articles/ai)
    * [ DevOps ](https://github.com/resources/articles/devops)
    * [ Security ](https://github.com/resources/articles/security)
    * [ Software Development ](https://github.com/resources/articles/software-development)
    * [ View all ](https://github.com/resources/articles)
Explore
    * [ Learning Pathways ](https://resources.github.com/learn/pathways)
    * [ Events & Webinars ](https://resources.github.com)
    * [ Ebooks & Whitepapers ](https://github.com/resources/whitepapers)
    * [ Customer Stories ](https://github.com/customer-stories)
    * [ Partners ](https://partner.github.com)
    * [ Executive Insights ](https://github.com/solutions/executive-insights)
  * Open Source 
    * [ GitHub Sponsors  Fund open source developers  ](https://github.com/sponsors)
    * [ The ReadME Project  GitHub community articles  ](https://github.com/readme)
Repositories
    * [ Topics ](https://github.com/topics)
    * [ Trending ](https://github.com/trending)
    * [ Collections ](https://github.com/collections)
  * Enterprise 
    * [ Enterprise platform  AI-powered developer platform  ](https://github.com/enterprise)
Available add-ons
    * [ GitHub Advanced Security  Enterprise-grade security features  ](https://github.com/security/advanced-security)
    * [ Copilot for business  Enterprise-grade AI features  ](https://github.com/features/copilot/copilot-business)
    * [ Premium Support  Enterprise-grade 24/7 support  ](https://github.com/premium-support)
  * [Pricing](https://github.com/pricing)


Search or jump to...
# Search code, repositories, users, issues, pull requests...
Search 
Clear
[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)
#  Provide feedback 
We read every piece of feedback, and take your input very seriously.
Include my email address so I can be contacted
Cancel  Submit feedback 
#  Saved searches 
## Use saved searches to filter your results more quickly
Name
Query
To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax). 
Cancel  Create saved search 
[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fgoogle%2Fwire%2Fblob%2Fmain%2Fdocs%2Fbest-practices.md)
[ Sign up ](https://github.com/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=google%2Fwire)
Appearance settings
Resetting focus
You signed in with another tab or window. [Reload](https://github.com/google/wire/blob/main/docs/best-practices.md) to refresh your session. You signed out in another tab or window. [Reload](https://github.com/google/wire/blob/main/docs/best-practices.md) to refresh your session. You switched accounts on another tab or window. [Reload](https://github.com/google/wire/blob/main/docs/best-practices.md) to refresh your session. Dismiss alert
{{ message }}
This repository was archived by the owner on Aug 7, 2025. It is now read-only. 
[ google ](https://github.com/google) / **[wire](https://github.com/google/wire) ** Public archive
  * [ Notifications ](https://github.com/login?return_to=%2Fgoogle%2Fwire) You must be signed in to change notification settings
  * [ Fork 674 ](https://github.com/login?return_to=%2Fgoogle%2Fwire)
  * [ Star  14.2k ](https://github.com/login?return_to=%2Fgoogle%2Fwire)


  * [ Code ](https://github.com/google/wire)
  * [ Issues 86 ](https://github.com/google/wire/issues)
  * [ Pull requests 23 ](https://github.com/google/wire/pulls)
  * [ Discussions ](https://github.com/google/wire/discussions)
  * [ Actions ](https://github.com/google/wire/actions)
  * [ Security ](https://github.com/google/wire/security)
[ ](https://github.com/google/wire/security)
[ ](https://github.com/google/wire/security)
[ ](https://github.com/google/wire/security)
### [ Uh oh!  ](https://github.com/google/wire/security)
[There was an error while loading. ](https://github.com/google/wire/security)[Please reload this page](https://github.com/google/wire/blob/main/docs/best-practices.md).
  * [ Insights ](https://github.com/google/wire/pulse)


Additional navigation options
  * [ Code  ](https://github.com/google/wire)
  * [ Issues  ](https://github.com/google/wire/issues)
  * [ Pull requests  ](https://github.com/google/wire/pulls)
  * [ Discussions  ](https://github.com/google/wire/discussions)
  * [ Actions  ](https://github.com/google/wire/actions)
  * [ Security  ](https://github.com/google/wire/security)
  * [ Insights  ](https://github.com/google/wire/pulse)


## Collapse file tree
## Files
main
Search this repository
  * .github
  * _tutorial
  * cmd
  * docs
    * best-practices.md
    * faq.md
    * guide.md
  * internal
  * .codecov.yml
  * .contributebot
  * .gitattributes
  * AUTHORS
  * CODE_OF_CONDUCT.md
  * CONTRIBUTING.md
  * CONTRIBUTORS
  * LICENSE
  * README.md
  * go.mod
  * go.sum
  * wire.go


## Breadcrumbs
  1. [wire](https://github.com/google/wire/tree/main)
  2. /[docs](https://github.com/google/wire/tree/main/docs)


/
# best-practices.md
Copy path
BlameMore file actions
BlameMore file actions
## Latest commit
[![shantuo](https://avatars.githubusercontent.com/u/8689543?v=4&size=40)](https://github.com/shantuo)[shantuo](https://github.com/google/wire/commits?author=shantuo)
[docs: update docs with the bind and struct changes (](https://github.com/google/wire/commit/b1c66a196d2983b0be2a05e14898f046c05fa645)[#155](https://github.com/google/wire/pull/155)[)](https://github.com/google/wire/commit/b1c66a196d2983b0be2a05e14898f046c05fa645)
Apr 23, 2019
[b1c66a1](https://github.com/google/wire/commit/b1c66a196d2983b0be2a05e14898f046c05fa645) · Apr 23, 2019
## History
[History](https://github.com/google/wire/commits/main/docs/best-practices.md)
Open commit details
[](https://github.com/google/wire/commits/main/docs/best-practices.md)
121 lines (90 loc) · 4.46 KB
## Breadcrumbs
  1. [wire](https://github.com/google/wire/tree/main)
  2. /[docs](https://github.com/google/wire/tree/main/docs)


/
# best-practices.md
Top
## File metadata and controls
  * Preview
  * Code
  * Blame


121 lines (90 loc) · 4.46 KB
[Raw](https://github.com/google/wire/raw/refs/heads/main/docs/best-practices.md)
Copy raw file
Download raw file
Outline
Edit and raw actions
# Best Practices
[](https://github.com/google/wire/blob/main/docs/best-practices.md#best-practices)
The following are practices we recommend for using Wire. This list will grow over time.
## Distinguishing Types
[](https://github.com/google/wire/blob/main/docs/best-practices.md#distinguishing-types)
If you need to inject a common type like `string`, create a new string type to avoid conflicts with other providers. For example:
```
type MySQLConnectionString string
```

## Options Structs
[](https://github.com/google/wire/blob/main/docs/best-practices.md#options-structs)
A provider function that includes many dependencies can pair the function with an options struct.
```
type Options struct {
  // Messages is the set of recommended greetings.
  Messages []Message
  // Writer is the location to send greetings. nil goes to stdout.
  Writer io.Writer
}
func NewGreeter(ctx context.Context, opts *Options) (*Greeter, error) {
  // ...
}
var GreeterSet = wire.NewSet(wire.Struct(new(Options), "*"), NewGreeter)
```

## Provider Sets in Libraries
[](https://github.com/google/wire/blob/main/docs/best-practices.md#provider-sets-in-libraries)
When creating a provider set for use in a library, the only changes you can make without breaking compatibility are:
  * Change which provider a provider set uses to provide a specific output, as long as it does not introduce a new input to the provider set. It may remove inputs. However, note that existing injectors will use the old provider until they are regenerated.
  * Introduce a new output type into the provider set, but only if the type itself is newly added. If the type is not new, it is possible that some injector already has the output type included, which would cause a conflict.


All other changes are not safe. This includes:
  * Requiring a new input in the provider set.
  * Removing an output type from a provider set.
  * Adding an existing output type into the provider set.


Instead of making one of these breaking changes, consider adding a new provider set.
As an example, if you have a provider set like this:
```
var GreeterSet = wire.NewSet(NewStdoutGreeter)
func DefaultGreeter(ctx context.Context) *Greeter {
  // ...
}
func NewStdoutGreeter(ctx context.Context, msgs []Message) *Greeter {
  // ...
}
func NewGreeter(ctx context.Context, w io.Writer, msgs []Message) (*Greeter, error) {
  // ...
}
```

You may:
  * Use `DefaultGreeter` instead of `NewStdoutGreeter` in `GreeterSet`.
  * Create a new type `T` and add a provider for `T` to `GreeterSet`, as long as `T` is introduced in the same commit/release as the provider is added.


You may not:
  * Use `NewGreeter` instead of `NewStdoutGreeter` in `GreeterSet`. This both adds an input type (`io.Writer`) and requires injectors to return an `error` where the provider of `*Greeter` did not require this before.
  * Remove `NewStdoutGreeter` from `GreeterSet`. Injectors depending on `*Greeter` will be broken.
  * Add a provider for `io.Writer` to `GreeterSet`. Injectors might already have a provider for `io.Writer` which might conflict with this one.


As such, you should pick the output types in a library provider set carefully. In general, prefer small provider sets in a library. For example, it is common for a library provider set to contain a single provider function along with a `wire.Bind` to the interface the return type implements. Avoiding larger provider sets reduces the likelihood that applications will encounter conflicts. To illustrate, imagine your library provides a client for a web service. While it may be tempting to bundle a provider for `*http.Client` in a provider set for your library's client, doing so would cause conflicts if every library did the same. Instead, the library's provider set should only include the provider for the API client, and let `*http.Client` be an input of the provider set.
## Mocking
[](https://github.com/google/wire/blob/main/docs/best-practices.md#mocking)
There are two approaches for creating an injected app with mocked dependencies. Examples of both approaches are shown [here](https://github.com/google/wire/tree/master/internal/wire/testdata/ExampleWithMocks/foo).
### Approach A: Pass mocks to the injector
[](https://github.com/google/wire/blob/main/docs/best-practices.md#approach-a-pass-mocks-to-the-injector)
Create a test-only injector that takes all of the mocks as arguments; the argument types must be the interface types the mocks are mocking. `wire.Build` can't include providers for the mocked dependencies without creating conflicts, so if you're using provider set(s) you will need to define one that doesn't include the mocked types.
### Approach B: Return the mocks from the injector
[](https://github.com/google/wire/blob/main/docs/best-practices.md#approach-b-return-the-mocks-from-the-injector)
Create a new struct that includes the app plus all of the dependencies you want to mock. Create a test-only injector that returns this struct, give it providers for the concrete mock types, and use `wire.Bind` to tell Wire that the concrete mock types should be used to fulfill the appropriate interface.
## Footer
[ ](https://github.com) © 2025 GitHub, Inc. 
### Footer navigation
  * [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
  * [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
  * [Security](https://github.com/security)
  * [Status](https://www.githubstatus.com/)
  * [Docs](https://docs.github.com/)
  * [Contact](https://support.github.com?tags=dotcom-footer)
  * Manage cookies 
  * Do not share my personal information 


You can’t perform that action at this time. 


## Source Information
- URL: https://github.com/google/wire/blob/main/docs/best-practices.md
- Harvested: 2025-08-20T00:38:25.891866
- Profile: deep_research
- Agent: architect
