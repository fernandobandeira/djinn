---
agent_context: architect
confidence: 0.95
harvested_at: '2025-08-20T00:38:16.604588'
profile: deep_research
source: https://github.com/google/wire/blob/main/docs/guide.md
topic: Wire Advanced Guide
---

# Wire Advanced Guide

[Skip to content](https://github.com/google/wire/blob/main/docs/guide.md#start-of-content)
## Navigation Menu
Toggle navigation
[ ](https://github.com/)
[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fgoogle%2Fwire%2Fblob%2Fmain%2Fdocs%2Fguide.md)
Appearance settings
  * Product 
    * [ GitHub Copilot  Write better code with AI  ](https://github.com/features/copilot)
    * [ GitHub Spark  New  Build and deploy intelligent apps  ](https://github.com/features/spark)
    * [ GitHub Models  New  Manage and compare prompts  ](https://github.com/features/models)
    * [ GitHub Advanced Security  Find and fix vulnerabilities  ](https://github.com/security/advanced-security)
    * [ Actions  Automate any workflow  ](https://github.com/features/actions)
    * [ Codespaces  Instant dev environments  ](https://github.com/features/codespaces)
    * [ Issues  Plan and track work  ](https://github.com/features/issues)
    * [ Code Review  Manage code changes  ](https://github.com/features/code-review)
    * [ Discussions  Collaborate outside of code  ](https://github.com/features/discussions)
    * [ Code Search  Find more, search less  ](https://github.com/features/code-search)
Explore
    * [ Why GitHub ](https://github.com/why-github)
    * [ All features ](https://github.com/features)
    * [ Documentation ](https://docs.github.com)
    * [ GitHub Skills ](https://skills.github.com)
    * [ Blog ](https://github.blog)
  * Solutions 
By company size
    * [ Enterprises ](https://github.com/enterprise)
    * [ Small and medium teams ](https://github.com/team)
    * [ Startups ](https://github.com/enterprise/startups)
    * [ Nonprofits ](https://github.com/solutions/industry/nonprofits)
By use case
    * [ DevSecOps ](https://github.com/solutions/use-case/devsecops)
    * [ DevOps ](https://github.com/solutions/use-case/devops)
    * [ CI/CD ](https://github.com/solutions/use-case/ci-cd)
    * [ View all use cases ](https://github.com/solutions/use-case)
By industry
    * [ Healthcare ](https://github.com/solutions/industry/healthcare)
    * [ Financial services ](https://github.com/solutions/industry/financial-services)
    * [ Manufacturing ](https://github.com/solutions/industry/manufacturing)
    * [ Government ](https://github.com/solutions/industry/government)
    * [ View all industries ](https://github.com/solutions/industry)
[ View all solutions ](https://github.com/solutions)
  * Resources 
Topics
    * [ AI ](https://github.com/resources/articles/ai)
    * [ DevOps ](https://github.com/resources/articles/devops)
    * [ Security ](https://github.com/resources/articles/security)
    * [ Software Development ](https://github.com/resources/articles/software-development)
    * [ View all ](https://github.com/resources/articles)
Explore
    * [ Learning Pathways ](https://resources.github.com/learn/pathways)
    * [ Events & Webinars ](https://resources.github.com)
    * [ Ebooks & Whitepapers ](https://github.com/resources/whitepapers)
    * [ Customer Stories ](https://github.com/customer-stories)
    * [ Partners ](https://partner.github.com)
    * [ Executive Insights ](https://github.com/solutions/executive-insights)
  * Open Source 
    * [ GitHub Sponsors  Fund open source developers  ](https://github.com/sponsors)
    * [ The ReadME Project  GitHub community articles  ](https://github.com/readme)
Repositories
    * [ Topics ](https://github.com/topics)
    * [ Trending ](https://github.com/trending)
    * [ Collections ](https://github.com/collections)
  * Enterprise 
    * [ Enterprise platform  AI-powered developer platform  ](https://github.com/enterprise)
Available add-ons
    * [ GitHub Advanced Security  Enterprise-grade security features  ](https://github.com/security/advanced-security)
    * [ Copilot for business  Enterprise-grade AI features  ](https://github.com/features/copilot/copilot-business)
    * [ Premium Support  Enterprise-grade 24/7 support  ](https://github.com/premium-support)
  * [Pricing](https://github.com/pricing)


Search or jump to...
# Search code, repositories, users, issues, pull requests...
Search 
Clear
[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)
#  Provide feedback 
We read every piece of feedback, and take your input very seriously.
Include my email address so I can be contacted
Cancel  Submit feedback 
#  Saved searches 
## Use saved searches to filter your results more quickly
Name
Query
To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax). 
Cancel  Create saved search 
[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fgoogle%2Fwire%2Fblob%2Fmain%2Fdocs%2Fguide.md)
[ Sign up ](https://github.com/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=google%2Fwire)
Appearance settings
Resetting focus
You signed in with another tab or window. [Reload](https://github.com/google/wire/blob/main/docs/guide.md) to refresh your session. You signed out in another tab or window. [Reload](https://github.com/google/wire/blob/main/docs/guide.md) to refresh your session. You switched accounts on another tab or window. [Reload](https://github.com/google/wire/blob/main/docs/guide.md) to refresh your session. Dismiss alert
{{ message }}
This repository was archived by the owner on Aug 7, 2025. It is now read-only. 
[ google ](https://github.com/google) / **[wire](https://github.com/google/wire) ** Public archive
  * [ Notifications ](https://github.com/login?return_to=%2Fgoogle%2Fwire) You must be signed in to change notification settings
  * [ Fork 674 ](https://github.com/login?return_to=%2Fgoogle%2Fwire)
  * [ Star  14.2k ](https://github.com/login?return_to=%2Fgoogle%2Fwire)


  * [ Code ](https://github.com/google/wire)
  * [ Issues 86 ](https://github.com/google/wire/issues)
  * [ Pull requests 23 ](https://github.com/google/wire/pulls)
  * [ Discussions ](https://github.com/google/wire/discussions)
  * [ Actions ](https://github.com/google/wire/actions)
  * [ Security ](https://github.com/google/wire/security)
[ ](https://github.com/google/wire/security)
[ ](https://github.com/google/wire/security)
[ ](https://github.com/google/wire/security)
### [ Uh oh!  ](https://github.com/google/wire/security)
[There was an error while loading. ](https://github.com/google/wire/security)[Please reload this page](https://github.com/google/wire/blob/main/docs/guide.md).
  * [ Insights ](https://github.com/google/wire/pulse)


Additional navigation options
  * [ Code  ](https://github.com/google/wire)
  * [ Issues  ](https://github.com/google/wire/issues)
  * [ Pull requests  ](https://github.com/google/wire/pulls)
  * [ Discussions  ](https://github.com/google/wire/discussions)
  * [ Actions  ](https://github.com/google/wire/actions)
  * [ Security  ](https://github.com/google/wire/security)
  * [ Insights  ](https://github.com/google/wire/pulse)


## Collapse file tree
## Files
main
Search this repository
  * .github
  * _tutorial
  * cmd
  * docs
    * best-practices.md
    * faq.md
    * guide.md
  * internal
  * .codecov.yml
  * .contributebot
  * .gitattributes
  * AUTHORS
  * CODE_OF_CONDUCT.md
  * CONTRIBUTING.md
  * CONTRIBUTORS
  * LICENSE
  * README.md
  * go.mod
  * go.sum
  * wire.go


## Breadcrumbs
  1. [wire](https://github.com/google/wire/tree/main)
  2. /[docs](https://github.com/google/wire/tree/main/docs)


/
# guide.md
Copy path
BlameMore file actions
BlameMore file actions
## Latest commit
[![giautm](https://avatars.githubusercontent.com/u/12751435?v=4&size=40)](https://github.com/giautm)[giautm](https://github.com/google/wire/commits?author=giautm)
[fix: run wire with -mod=mod (](https://github.com/google/wire/commit/f5e937daa903d897e925a8cd6fdc12566cd7e4c5)[#353](https://github.com/google/wire/pull/353)[)](https://github.com/google/wire/commit/f5e937daa903d897e925a8cd6fdc12566cd7e4c5)
Open commit details
May 27, 2022
[f5e937d](https://github.com/google/wire/commit/f5e937daa903d897e925a8cd6fdc12566cd7e4c5) · May 27, 2022
## History
[History](https://github.com/google/wire/commits/main/docs/guide.md)
Open commit details
[](https://github.com/google/wire/commits/main/docs/guide.md)
465 lines (355 loc) · 10.6 KB
## Breadcrumbs
  1. [wire](https://github.com/google/wire/tree/main)
  2. /[docs](https://github.com/google/wire/tree/main/docs)


/
# guide.md
Top
## File metadata and controls
  * Preview
  * Code
  * Blame


465 lines (355 loc) · 10.6 KB
[Raw](https://github.com/google/wire/raw/refs/heads/main/docs/guide.md)
Copy raw file
Download raw file
Outline
Edit and raw actions
# Wire User Guide
[](https://github.com/google/wire/blob/main/docs/guide.md#wire-user-guide)
## Basics
[](https://github.com/google/wire/blob/main/docs/guide.md#basics)
Wire has two core concepts: providers and injectors.
### Defining Providers
[](https://github.com/google/wire/blob/main/docs/guide.md#defining-providers)
The primary mechanism in Wire is the **provider** : a function that can produce a value. These functions are ordinary Go code.
```
package foobarbaz
type Foo struct {
  X int
}
// ProvideFoo returns a Foo.
func ProvideFoo() Foo {
  return Foo{X: 42}
}
```

Provider functions must be exported in order to be used from other packages, just like ordinary functions.
Providers can specify dependencies with parameters:
```
package foobarbaz
// ...
type Bar struct {
  X int
}
// ProvideBar returns a Bar: a negative Foo.
func ProvideBar(foo Foo) Bar {
  return Bar{X: -foo.X}
}
```

Providers can also return errors:
```
package foobarbaz
import (
  "context"
  "errors"
)
// ...
type Baz struct {
  X int
}
// ProvideBaz returns a value if Bar is not zero.
func ProvideBaz(ctx context.Context, bar Bar) (Baz, error) {
  if bar.X == 0 {
    return Baz{}, errors.New("cannot provide baz when bar is zero")
  }
  return Baz{X: bar.X}, nil
}
```

Providers can be grouped into **provider sets**. This is useful if several providers will frequently be used together. To add these providers to a new set called `SuperSet`, use the `wire.NewSet` function:
```
package foobarbaz
import (
  // ...
  "github.com/google/wire"
)
// ...
var SuperSet = wire.NewSet(ProvideFoo, ProvideBar, ProvideBaz)
```

You can also add other provider sets into a provider set.
```
package foobarbaz
import (
  // ...
  "example.com/some/other/pkg"
)
// ...
var MegaSet = wire.NewSet(SuperSet, pkg.OtherSet)
```

### Injectors
[](https://github.com/google/wire/blob/main/docs/guide.md#injectors)
An application wires up these providers with an **injector** : a function that calls providers in dependency order. With Wire, you write the injector's signature, then Wire generates the function's body.
An injector is declared by writing a function declaration whose body is a call to `wire.Build`. The return values don't matter as long as they are of the correct type. The values themselves will be ignored in the generated code. Let's say that the above providers were defined in a package called `example.com/foobarbaz`. The following would declare an injector to obtain a `Baz`:
```
// +build wireinject
// The build tag makes sure the stub is not built in the final build.
package main
import (
  "context"
  "github.com/google/wire"
  "example.com/foobarbaz"
)
func initializeBaz(ctx context.Context) (foobarbaz.Baz, error) {
  wire.Build(foobarbaz.MegaSet)
  return foobarbaz.Baz{}, nil
}
```

Like providers, injectors can be parameterized on inputs (which then get sent to providers) and can return errors. Arguments to `wire.Build` are the same as `wire.NewSet`: they form a provider set. This is the provider set that gets used during code generation for that injector.
Any non-injector declarations found in a file with injectors will be copied into the generated file.
You can generate the injector by invoking Wire in the package directory:
```
wire
```

Wire will produce an implementation of the injector in a file called `wire_gen.go` that looks something like this:
```
// Code generated by Wire. DO NOT EDIT.
//go:generate go run -mod=mod github.com/google/wire/cmd/wire
//+build !wireinject
package main
import (
  "example.com/foobarbaz"
)
func initializeBaz(ctx context.Context) (foobarbaz.Baz, error) {
  foo := foobarbaz.ProvideFoo()
  bar := foobarbaz.ProvideBar(foo)
  baz, err := foobarbaz.ProvideBaz(ctx, bar)
  if err != nil {
    return foobarbaz.Baz{}, err
  }
  return baz, nil
}
```

As you can see, the output is very close to what a developer would write themselves. Further, there is little dependency on Wire at runtime: all of the written code is just normal Go code, and can be used without Wire.
Once `wire_gen.go` is created, you can regenerate it by running [`go generate`](https://blog.golang.org/generate).
## Advanced Features
[](https://github.com/google/wire/blob/main/docs/guide.md#advanced-features)
The following features all build on top of the concepts of providers and injectors.
### Binding Interfaces
[](https://github.com/google/wire/blob/main/docs/guide.md#binding-interfaces)
Frequently, dependency injection is used to bind a concrete implementation for an interface. Wire matches inputs to outputs via [type identity](https://golang.org/ref/spec#Type_identity), so the inclination might be to create a provider that returns an interface type. However, this would not be idiomatic, since the Go best practice is to [return concrete types](https://github.com/golang/go/wiki/CodeReviewComments#interfaces). Instead, you can declare an interface binding in a provider set:
```
type Fooer interface {
  Foo() string
}
type MyFooer string
func (b *MyFooer) Foo() string {
  return string(*b)
}
func provideMyFooer() *MyFooer {
  b := new(MyFooer)
  *b = "Hello, World!"
  return b
}
type Bar string
func provideBar(f Fooer) string {
  // f will be a *MyFooer.
  return f.Foo()
}
var Set = wire.NewSet(
  provideMyFooer,
  wire.Bind(new(Fooer), new(*MyFooer)),
  provideBar)
```

The first argument to `wire.Bind` is a pointer to a value of the desired interface type and the second argument is a pointer to a value of the type that implements the interface. Any set that includes an interface binding must also have a provider in the same set that provides the concrete type.
### Struct Providers
[](https://github.com/google/wire/blob/main/docs/guide.md#struct-providers)
Structs can be constructed using provided types. Use the `wire.Struct` function to construct a struct type and tell the injector which field(s) should be injected. The injector will fill in each field using the provider for the field's type. For the resulting struct type `S`, `wire.Struct` provides both `S` and `*S`. For example, given the following providers:
```
type Foo int
type Bar int
func ProvideFoo() Foo {/* ... */}
func ProvideBar() Bar {/* ... */}
type FooBar struct {
  MyFoo Foo
  MyBar Bar
}
var Set = wire.NewSet(
  ProvideFoo,
  ProvideBar,
  wire.Struct(new(FooBar), "MyFoo", "MyBar"))
```

A generated injector for `FooBar` would look like this:
```
func injectFooBar() FooBar {
  foo := ProvideFoo()
  bar := ProvideBar()
  fooBar := FooBar{
    MyFoo: foo,
    MyBar: bar,
  }
  return fooBar
}
```

The first argument to `wire.Struct` is a pointer to the desired struct type and the subsequent arguments are the names of fields to be injected. A special string `"*"` can be used as a shortcut to tell the injector to inject all fields. So `wire.Struct(new(FooBar), "*")` produces the same result as above.
For the above example, you can specify only injecting `"MyFoo"` by changing the `Set` to:
```
var Set = wire.NewSet(
  ProvideFoo,
  wire.Struct(new(FooBar), "MyFoo"))
```

Then the generated injector for `FooBar` would look like this:
```
func injectFooBar() FooBar {
  foo := ProvideFoo()
  fooBar := FooBar{
    MyFoo: foo,
  }
  return fooBar
}
```

If the injector returned a `*FooBar` instead of a `FooBar`, the generated injector would look like this:
```
func injectFooBar() *FooBar {
  foo := ProvideFoo()
  fooBar := &FooBar{
    MyFoo: foo,
  }
  return fooBar
}
```

It is sometimes useful to prevent certain fields from being filled in by the injector, especially when passing `*` to `wire.Struct`. You can tag a field with ``wire:"-"`` to have Wire ignore such fields. For example:
```
type Foo struct {
  mu sync.Mutex `wire:"-"`
  Bar Bar
}
```

When you provide the `Foo` type using `wire.Struct(new(Foo), "*")`, Wire will automatically omit the `mu` field. Additionally, it is an error to explicitly specify a prevented field as in `wire.Struct(new(Foo), "mu")`.
### Binding Values
[](https://github.com/google/wire/blob/main/docs/guide.md#binding-values)
Occasionally, it is useful to bind a basic value (usually `nil`) to a type. Instead of having injectors depend on a throwaway provider function, you can add a value expression to a provider set.
```
type Foo struct {
  X int
}
func injectFoo() Foo {
  wire.Build(wire.Value(Foo{X: 42}))
  return Foo{}
}
```

The generated injector would look like this:
```
func injectFoo() Foo {
  foo := _wireFooValue
  return foo
}
var (
  _wireFooValue = Foo{X: 42}
)
```

It's important to note that the expression will be copied to the injector's package; references to variables will be evaluated during the injector package's initialization. Wire will emit an error if the expression calls any functions or receives from any channels.
For interface values, use `InterfaceValue`:
```
func injectReader() io.Reader {
  wire.Build(wire.InterfaceValue(new(io.Reader), os.Stdin))
  return nil
}
```

### Use Fields of a Struct as Providers
[](https://github.com/google/wire/blob/main/docs/guide.md#use-fields-of-a-struct-as-providers)
Sometimes the providers the user wants are some fields of a struct. If you find yourself writing a provider like `getS` in the example below to promote struct fields into provided types:
```
type Foo struct {
  S string
  N int
  F float64
}
func getS(foo Foo) string {
  // Bad! Use wire.FieldsOf instead.
  return foo.S
}
func provideFoo() Foo {
  return Foo{ S: "Hello, World!", N: 1, F: 3.14 }
}
func injectedMessage() string {
  wire.Build(
    provideFoo,
    getS)
  return ""
}
```

You can instead use `wire.FieldsOf` to use those fields directly without writing `getS`:
```
func injectedMessage() string {
  wire.Build(
    provideFoo,
    wire.FieldsOf(new(Foo), "S"))
  return ""
}
```

The generated injector would look like this:
```
func injectedMessage() string {
  foo := provideFoo()
  string2 := foo.S
  return string2
}
```

You can add as many field names to a `wire.FieldsOf` function as you like. For a given field type `T`, `FieldsOf` provides at least `T`; if the struct argument is a pointer to a struct, then `FieldsOf` also provides `*T`.
### Cleanup functions
[](https://github.com/google/wire/blob/main/docs/guide.md#cleanup-functions)
If a provider creates a value that needs to be cleaned up (e.g. closing a file), then it can return a closure to clean up the resource. The injector will use this to either return an aggregated cleanup function to the caller or to clean up the resource if a provider called later in the injector's implementation returns an error.
```
func provideFile(log Logger, path Path) (*os.File, func(), error) {
  f, err := os.Open(string(path))
  if err != nil {
    return nil, nil, err
  }
  cleanup := func() {
    if err := f.Close(); err != nil {
      log.Log(err)
    }
  }
  return f, cleanup, nil
}
```

A cleanup function is guaranteed to be called before the cleanup function of any of the provider's inputs and must have the signature `func()`.
### Alternate Injector Syntax
[](https://github.com/google/wire/blob/main/docs/guide.md#alternate-injector-syntax)
If you grow weary of writing `return foobarbaz.Foo{}, nil` at the end of your injector function declaration, you can instead write it more concisely with a `panic`:
```
func injectFoo() Foo {
  panic(wire.Build(/* ... */))
}
```

## Footer
[ ](https://github.com) © 2025 GitHub, Inc. 
### Footer navigation
  * [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
  * [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
  * [Security](https://github.com/security)
  * [Status](https://www.githubstatus.com/)
  * [Docs](https://docs.github.com/)
  * [Contact](https://support.github.com?tags=dotcom-footer)
  * Manage cookies 
  * Do not share my personal information 


You can’t perform that action at this time. 


## Source Information
- URL: https://github.com/google/wire/blob/main/docs/guide.md
- Harvested: 2025-08-20T00:38:16.604588
- Profile: deep_research
- Agent: architect
